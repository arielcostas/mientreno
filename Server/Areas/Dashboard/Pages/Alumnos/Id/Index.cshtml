@page "/Dashboard/Alumnos/{id}"
@using Microsoft.AspNetCore.Mvc.TagHelpers
@using Mientreno.Server.Extensions
@model SingleAlumnoModel
@{
	ViewData["Title"] = @Model.Alumno.NombreCompleto;
}

<main id="main-container">
	<h1>
		@Model.Alumno.NombreCompleto
	</h1>

	<div class="title-with-action">
		<h2>@AppStrings.cuestionarios</h2>
		<a href="#" class="button button-disabled">+ @AppStrings.Action_Create @AppStrings.cuestionario</a>
	</div>

	@if (Model.Alumno.Cuestionarios.Count == 0)
	{
		<div class="alert alert-bad" role="alert">
			<strong class="alert-title">@AppStrings.dashboard_NoCuestionariosCreated</strong>
			<p>@AppStrings.availableSoon</p>
		</div>
	}

	<div class="title-with-action">
		<h2>@AppStrings.Noun_Rutina_Plural</h2>
		<a href="@Model.Id/Plan" class="button button-primary">+ @AppStrings.Action_Create @AppStrings.Noun_Plan_Singular</a>
	</div>

	@if (Model.Alumno.JornadasEntrenamientos.Count == 0)
	{
		<div class="alert alert-bad" role="alert">
			<strong class="alert-title">
				@AppStrings.dashboard_NoPlansCreated
			</strong>
		</div>
	}

	<section>
		@foreach (var rutina in Model.Alumno.JornadasEntrenamientos.OrderBy(r => r.Estado))
		{
			var badgeColour = rutina.Estado switch
			{
				EstadoRutina.Borrador => "bad",
				EstadoRutina.Publicada => "warning",
				EstadoRutina.EnCurso => "warning",
				EstadoRutina.Finalizada => "good",
				EstadoRutina.Evaluada => "good",
				_ => "bad"
				};

			var badgeText = rutina.Estado switch {
				EstadoRutina.Borrador => AppStrings.Noun_EstadoRutina_Borrador,
				EstadoRutina.Publicada => AppStrings.Noun_EstadoRutina_Publicada,
				EstadoRutina.EnCurso => AppStrings.Noun_EstadoRutina_EnCurso,
				EstadoRutina.Finalizada => AppStrings.Noun_EstadoRutina_Finalizada,
				EstadoRutina.Evaluada => AppStrings.Noun_EstadoRutina_Evaluada,
				_ => throw new ArgumentOutOfRangeException()
				};
			<li>
				<span class="badge badge-@badgeColour">@badgeText</span>
				-
				<a class="link link-text"
				   href="@Model.Id/Plan?p=@rutina.Id">
					@if (rutina.Nombre.IsNullOrWhiteSpace())
					{
						<i>@AppStrings.Noun_JornadaEntrenamiento_NoName</i>
					}

					@rutina.Nombre
				</a >
			</li>
		}
	</section>
</main>